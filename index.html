<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Proposal Generator</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  
  body {
    background: linear-gradient(135deg, #ffcce0, #ff99cc);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }

  .container {
    width: 100%;
    max-width: 900px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .card {
    background: white;
    border-radius: 20px;
    padding: 30px;
    width: 100%;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .card:hover {
    transform: translateY(-5px);
  }

  h1, h2, h3 {
    color: #ff3366;
    text-align: center;
    margin-bottom: 20px;
  }

  h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
  }

  h2 {
    font-size: 1.8rem;
  }

  h3 {
    font-size: 1.4rem;
    color: #cc0066;
  }

  p {
    color: #555;
    margin-bottom: 15px;
    line-height: 1.5;
  }

  .header-section {
    text-align: center;
    padding-bottom: 20px;
    border-bottom: 2px dashed #ff99cc;
  }

  .creator-note {
    font-size: 0.9rem;
    color: #777;
    text-align: center;
    margin-top: 10px;
  }

  .form-group {
    margin-bottom: 20px;
  }

  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #ff3366;
  }

  input {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #ffcce0;
    border-radius: 10px;
    font-size: 1rem;
    transition: border-color 0.3s;
  }

  input:focus {
    outline: none;
    border-color: #ff3366;
  }

  .phone-input {
    display: flex;
    align-items: center;
  }

  .phone-input span {
    padding: 12px 15px;
    background: #f0f0f0;
    border: 2px solid #ffcce0;
    border-right: none;
    border-radius: 10px 0 0 10px;
    color: #555;
  }

  .phone-input input {
    border-radius: 0 10px 10px 0;
  }

  .btn {
    padding: 14px 30px;
    border: none;
    border-radius: 10px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    display: block;
    margin: 20px auto;
    width: 100%;
    max-width: 300px;
  }

  .btn-primary {
    background: linear-gradient(to right, #ff3366, #ff6699);
    color: white;
  }

  .btn-primary:hover {
    background: linear-gradient(to right, #ff0066, #ff3385);
    box-shadow: 0 5px 15px rgba(255, 51, 102, 0.3);
  }

  .btn-secondary {
    background: #f0f0f0;
    color: #333;
  }

  .btn-secondary:hover {
    background: #e0e0e0;
  }

  .btn-gpay {
    background: linear-gradient(to right, #4285f4, #34a853);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  .btn-gpay:hover {
    background: linear-gradient(to right, #3367d6, #2e8b57);
    box-shadow: 0 5px 15px rgba(66, 133, 244, 0.3);
  }

  .gpay-icon {
    font-size: 1.3rem;
  }

  .hidden {
    display: none;
  }

  .link-container {
    background: #fff5f8;
    border: 2px solid #ffcce0;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
    word-break: break-all;
  }

  .link-url {
    font-size: 1.1rem;
    color: #ff3366;
    font-weight: bold;
  }

  .proposal-section {
    text-align: center;
  }

  .options {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 30px 0;
    flex-wrap: wrap;
  }

  .btn-yes {
    background: linear-gradient(to right, #00cc66, #33cc99);
    color: white;
    padding: 15px 40px;
    font-size: 1.3rem;
    z-index: 10;
    position: relative;
  }

  .btn-yes:hover {
    background: linear-gradient(to right, #00b359, #2eb88c);
    box-shadow: 0 5px 15px rgba(0, 204, 102, 0.3);
  }

  .btn-no {
    background: linear-gradient(to right, #ff9933, #ffcc66);
    color: white;
    padding: 15px 40px;
    font-size: 1.3rem;
    z-index: 10;
    position: relative;
  }

  .btn-no:hover {
    background: linear-gradient(to right, #e68a00, #f0b84d);
    box-shadow: 0 5px 15px rgba(255, 153, 51, 0.3);
  }

  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .modal-content {
    background: white;
    border-radius: 20px;
    padding: 30px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  }

  .bill-section {
    background: #f9f9f9;
    border-radius: 10px;
    padding: 20px;
    margin-top: 20px;
  }

  .bill-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px dashed #ddd;
  }

  .bill-total {
    font-weight: bold;
    font-size: 1.2rem;
    color: #ff3366;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 2px solid #ff99cc;
  }

  .timestamp {
    font-size: 0.9rem;
    color: #777;
    text-align: center;
    margin-top: 20px;
  }

  .cute-sentence {
    font-size: 1.3rem;
    color: #ff3366;
    font-style: italic;
    text-align: center;
    margin: 20px 0;
    padding: 15px;
    background: linear-gradient(135deg, #fff0f6, #ffe6f2);
    border-radius: 15px;
    border: 2px dashed #ff99cc;
  }

  .gap-message {
    color: #ff3366;
    text-align: center;
    margin: 15px 0;
    padding: 10px;
    background: #fff0f6;
    border-radius: 10px;
    font-weight: bold;
  }

  /* Cat Animation Styles */
  .cat-animation {
    position: absolute;
    font-size: 4rem;
    animation-duration: 2s;
    animation-iteration-count: infinite;
    animation-timing-function: ease-in-out;
    z-index: 1;
  }

  .kissing-cats {
    animation-name: kissAnimation;
    font-size: 5rem;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .smiling-cat {
    animation-name: smileAnimation;
    font-size: 6rem;
    top: 20px;
    right: 20px;
  }

  .proposal-cats {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin: 30px 0;
    flex-wrap: wrap;
  }

  .proposal-cat {
    font-size: 6rem;
    animation: float 3s ease-in-out infinite;
  }

  .proposal-cat:nth-child(2) {
    animation-delay: 0.5s;
  }

  .proposal-cat:nth-child(3) {
    animation-delay: 1s;
  }

  .proposal-cat:nth-child(4) {
    animation-delay: 1.5s;
  }

  .proposal-cat:nth-child(5) {
    animation-delay: 2s;
  }

  /* Keyframes for animations */
  @keyframes kissAnimation {
    0% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.2); }
    100% { transform: translate(-50%, -50%) scale(1); }
  }

  @keyframes smileAnimation {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(10deg); }
    50% { transform: rotate(0deg); }
    75% { transform: rotate(-10deg); }
    100% { transform: rotate(0deg); }
  }

  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
    100% { transform: translateY(0px); }
  }

  @keyframes heartBeat {
    0% { transform: scale(1); }
    25% { transform: scale(1.1); }
    50% { transform: scale(1); }
    75% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  .heart-beat {
    animation: heartBeat 1s infinite;
    color: #ff3366;
  }

  .proposal-question {
    font-size: 2rem;
    margin: 30px 0;
    animation: heartBeat 2s infinite;
    color: #ff3366;
    text-shadow: 2px 2px 4px rgba(255, 51, 102, 0.2);
  }

  .love-cats {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 10px 0;
  }

  .love-cat {
    font-size: 4rem;
    animation: float 2s ease-in-out infinite;
  }
</style>
</head>
<body>

<div class="container">
  <!-- Generator Page -->
  <div class="card" id="generatorPage">
    <div class="header-section">
      <h1>üíù Valentine Proposal Generator</h1>
      <p>Create a magical Valentine's Day proposal with personalized amounts!</p>
      <p class="creator-note">Made with üíñ </p>
    </div>

    <div class="form-group">
      <label for="yourName">Your Name:</label>
      <input type="text" id="yourName" placeholder="Enter your name">
    </div>

    <div class="form-group">
      <label for="valentineName">Your Valentine's Name:</label>
      <input type="text" id="valentineName" placeholder="Enter your Valentine's name">
    </div>

    <div class="form-group">
      <label for="phoneNumber">Your Phone Number (for GPay):</label>
      <div class="phone-input">
        <span>+91</span>
        <input type="tel" id="phoneNumber" placeholder="Enter your phone number" maxlength="10">
      </div>
    </div>

    <div class="form-group">
      <label>üíî Amount if they say No:</label>
      <input type="number" id="amount1" placeholder="Enter amount for No option" max="99999" min="1">
    </div>

    <div class="form-group">
      <label>üíñ Amount if they say Yes:</label>
      <input type="number" id="amount2" placeholder="Enter amount for Yes option" max="99999" min="1">
    </div>

    <button class="btn btn-primary" onclick="generateLink()">‚ú® Generate Valentine Link</button>

    <div id="linkSection" class="hidden">
      <h3>Your Valentine Link is Ready! üíù</h3>
      <div class="link-container">
        <p class="link-url" id="generatedLink"></p>
      </div>
      <button class="btn btn-secondary" onclick="copyLink()">Copy Link</button>
      <button class="btn btn-primary" onclick="openProposal()">Open Proposal Page</button>
    </div>
  </div>

  <!-- Proposal Page -->
  <div class="card hidden" id="proposalPage">
    <div class="header-section">
      <h2>Will you be my Valentine?</h2>
      <div class="proposal-cats">
       <div style="width:80%; overflow:hidden; border-radius:16px;">
  <img src="proposal.jpg" style="width:100%; height:auto;" />
</div>


      
      </div>
      <div class="proposal-question" id="proposalQuestion">
        Do you mew my Valentine? üòª
      </div>
      <div class="cute-sentence">
        "Every love story is beautiful, but ours is my favorite. üíñ"
      </div>
    </div>

    <div class="options">
      <button class="btn btn-yes" onclick="handleYes()">Yes! üòª Purr-fect!</button>
      <button class="btn btn-no" onclick="handleNo()" id="noButton">No üòæ Maybe Later</button>
    </div>
    
      <p class="creator-note">Made with üíñ </p>
  
    <p id="noHint" class="hidden" style="color: #ff9933; font-style: italic; text-align:center;">
      Think about it... Our love story is just beginning! üíï
    </p>
  </div>

  <!-- Yes Result Page -->
  <div class="card hidden" id="yesResultPage">
    <div class="header-section">
      <h2>üéâ Yay! You Said YES! üíñ</h2>
      <div class="cute-sentence">
        "Love is not about how many days, weeks or months you've been together, it's all about how much you love each other every day."
      </div>
    </div>

 
    <div style="width:100%; overflow:hidden; border-radius:16px;">
  <img src="yes.jpg" style="width:100%; height:auto;" />
</div>


    <div class="bill-section">
      <h3>üíù Pay the upcoming bills alsoo</h3>
      <div id="yesBillItems"></div>
      <div class="bill-total">
        Total Love Investment: ‚Çπ<span id="yesTotal">0</span>
      </div>
    </div>

    <div class="gap-message">
      Pay via GPay to celebrate our love! üí∞
    </div>

    <div class="payment-buttons">
      <button class="btn btn-gpay" onclick="openGPay('yes')">
        <span class="gpay-icon">üí∞</span>
        Pay with GPay 
      </button>
    </div>

    <div class="timestamp">
      üíå Proposal sent at: <span id="yesGeneratedTime"></span><br>
      üòª Yes accepted at: <span id="yesClickedTime"></span>
    </div>

    <button class="btn btn-primary" onclick="createNewLink()">Create Another Love Story</button>
  </div>

  <!-- No Modal -->
  <div class="modal" id="noModal">
    <div class="modal-content">
      <h2>üòæ You said No...</h2>
      <div style="width:100%; overflow:hidden; border-radius:16px;">
  <img src="no.jpg" style="width:100%; height:auto;" />
</div>


      <p>But love deserves a second chance! Here's what it'll cost to change my mind:</p>

      <div class="gap-message">
        Pay via GPay to convince you! üí∞
      </div>

      <div class="bill-section">
        <h3>üíù Pay the bills so far</h3>
        <div id="noBillItems"></div>
        <div class="bill-total">
          Total to Win My Heart: ‚Çπ<span id="noTotal">0</span>
        </div>
      </div>

      <div class="payment-buttons">
        <button class="btn btn-gpay" onclick="openGPay('no')">
          <span class="gpay-icon">üí∞</span>
          Pay with GPay
        </button>
      </div>

      <div class="timestamp">
        üòæ No clicked at: <span id="noClickedTime"></span>
      </div>

      <div class="payment-buttons">
        <button class="btn btn-primary" onclick="closeModal()">Close</button>
        <button class="btn btn-secondary" onclick="tryAgain()">You regret? Go back</button>
      </div>
    </div>
  </div>
</div>

<script>
  let generatedTime, yesClickedTime, noClickedTime;
  let amount1 = 0;
  let amount2 = 0;
  let noClicked = false;
  let userPhone = '';

  function validatePhoneNumber(phone) {
    const phoneRegex = /^[6-9]\d{9}$/;
    return phoneRegex.test(phone);
  }

  function generateLink() {
    const yourName = document.getElementById('yourName').value.trim();
    const valentineName = document.getElementById('valentineName').value.trim();
    const phone = document.getElementById('phoneNumber').value.trim();
    amount1 = parseInt(document.getElementById('amount1').value) || 0;
    amount2 = parseInt(document.getElementById('amount2').value) || 0;

    if (!yourName || !valentineName) {
      alert('Please enter both names!');
      return;
    }

    if (!phone || !validatePhoneNumber(phone)) {
      alert('Please enter a valid Indian phone number (10 digits starting with 6-9)!');
      return;
    }

    if (!amount1 || !amount2) {
      alert('Please enter both amounts!');
      return;
    }

    localStorage.clear(); // clear old data
    localStorage.setItem('valentineData', JSON.stringify({
      from: yourName,
      to: valentineName,
      phone: phone,
      amount1: amount1,
      amount2: amount2
    }));

    const baseUrl = window.location.href.split('?')[0];
    const link = `${baseUrl}?from=${encodeURIComponent(yourName)}&to=${encodeURIComponent(valentineName)}&phone=${phone}&a1=${amount1}&a2=${amount2}`;

    document.getElementById('generatedLink').textContent = link;
    document.getElementById('linkSection').classList.remove('hidden');

    generatedTime = new Date();
  }

  function copyLink() {
    const linkText = document.getElementById('generatedLink').textContent;
    navigator.clipboard.writeText(linkText).then(() => {
      alert('Link copied to clipboard!');
    });
  }

  function openProposal() {
    document.getElementById('generatorPage').classList.add('hidden');
    document.getElementById('proposalPage').classList.remove('hidden');

    const data = JSON.parse(localStorage.getItem('valentineData'));
    if (data) {
      document.getElementById('proposalQuestion').textContent = `${data.to}, do you mew my Valentine? üòª`;
      amount1 = data.amount1 || 0;
      amount2 = data.amount2 || 0;
      userPhone = data.phone || '';
    }

    setTimeout(() => {
      document.getElementById('noHint').classList.remove('hidden');
    }, 2000);
  }

  function handleYes() {
    yesClickedTime = new Date();
    const data = JSON.parse(localStorage.getItem('valentineData'));

    document.getElementById('proposalPage').classList.add('hidden');
    document.getElementById('yesResultPage').classList.remove('hidden');

    document.getElementById('yesGeneratedTime').textContent = generatedTime ? generatedTime.toLocaleString() : new Date().toLocaleString();
    document.getElementById('yesClickedTime').textContent = yesClickedTime.toLocaleString();

    generateYesBill();
  }

  function handleNo() {
    noClicked = true;
    noClickedTime = new Date();
    document.getElementById('noClickedTime').textContent = noClickedTime.toLocaleString();

    document.getElementById('noButton').disabled = true;
    document.getElementById('noButton').style.opacity = '0.5';
    document.getElementById('noButton').innerHTML = 'Already Clicked üòæ';

    generateNoBill();
    document.getElementById('noModal').style.display = 'flex';
    window.addEventListener('beforeunload', preventRefresh);
  }

  function preventRefresh(e) {
    if (noClicked) {
      e.preventDefault();
      e.returnValue = 'Are you sure you want to leave? Your response has been recorded.';
      return e.returnValue;
    }
  }

  function generateYesBill() {
    const billItems = [
      { name: "Romantic Candlelight Dinner", percentage: 0.25 },
      { name: "Beautiful Rose Bouquet", percentage: 0.15 },
      { name: "Premium Chocolates", percentage: 0.1 },
      { name: "Surprise Gift", percentage: 0.3 },
      { name: "Celebration Cake", percentage: 0.1 },
      { name: "Memory Photo Album", percentage: 0.1 }
    ];

    let total = 0;
    let billHTML = '';

    billItems.forEach(item => {
      const itemAmount = Math.round(amount2 * item.percentage);
      total += itemAmount;
      billHTML += `
        <div class="bill-item">
          <span>${item.name}</span>
          <span>‚Çπ${itemAmount.toLocaleString()}</span>
        </div>
      `;
    });

    document.getElementById('yesBillItems').innerHTML = billHTML;
    document.getElementById('yesTotal').textContent = total.toLocaleString();
  }

  function generateNoBill() {
    const billItems = [
      { name: "Apology Flowers", percentage: 0.2 },
      { name: "Sorry Chocolates", percentage: 0.15 },
      { name: "Sweet Treats", percentage: 0.1 },
      { name: "Romantic Card", percentage: 0.05 },
      { name: "Promise Gift", percentage: 0.3 },
      { name: "Dinner Date", percentage: 0.2 }
    ];

    let total = 0;
    let billHTML = '';

    billItems.forEach(item => {
      const itemAmount = Math.round(amount1 * item.percentage);
      total += itemAmount;
      billHTML += `
        <div class="bill-item">
          <span>${item.name}</span>
          <span>‚Çπ${itemAmount.toLocaleString()}</span>
        </div>
      `;
    });

    document.getElementById('noBillItems').innerHTML = billHTML;
    document.getElementById('noTotal').textContent = total.toLocaleString();
  }

  function openGPay(type) {
    const data = JSON.parse(localStorage.getItem('valentineData'));
    if (!data || !userPhone) {
      alert('Payment information not found. Please create a new link.');
      return;
    }

    const amount = type === 'yes' ? amount2 : amount1;
    const message = type === 'yes'
      ? `Valentine's Celebration for ${data.to} from ${data.from}`
      : `Convince Me Gift for ${data.to} from ${data.from}`;

    const upiId = `${userPhone}@okbizaxis`;

    const gpayUrl = `tez://upi/pay?pa=${encodeURIComponent(upiId)}&pn=${encodeURIComponent(data.from)}&am=${amount}&tn=${encodeURIComponent(message)}&cu=INR`;
    window.open(gpayUrl, '_blank');

    setTimeout(() => {
      const fallbackUrl = `upi://pay?pa=${encodeURIComponent(upiId)}&pn=${encodeURIComponent(data.from)}&am=${amount}&tn=${encodeURIComponent(message)}&cu=INR`;
      window.open(fallbackUrl, '_blank');
    }, 300);
  }

  function closeModal() {
    document.getElementById('noModal').style.display = 'none';
  }

  function tryAgain() {
    closeModal();
    document.getElementById('noButton').disabled = false;
    document.getElementById('noButton').style.opacity = '1';
    document.getElementById('noButton').innerHTML = 'No üòæ Maybe Later';

    noClicked = false;
    window.removeEventListener('beforeunload', preventRefresh);
  }

  function createNewLink() {
    document.getElementById('yourName').value = '';
    document.getElementById('valentineName').value = '';
    document.getElementById('phoneNumber').value = '';
    document.getElementById('amount1').value = '';
    document.getElementById('amount2').value = '';

    amount1 = 0;
    amount2 = 0;
    userPhone = '';

    document.getElementById('yesResultPage').classList.add('hidden');
    document.getElementById('proposalPage').classList.add('hidden');
    document.getElementById('generatorPage').classList.remove('hidden');
    document.getElementById('linkSection').classList.add('hidden');

    noClicked = false;
    window.removeEventListener('beforeunload', preventRefresh);
    localStorage.clear();
  }

  window.onload = function () {
    const urlParams = new URLSearchParams(window.location.search);
    const from = urlParams.get('from');
    const to = urlParams.get('to');
    const phone = urlParams.get('phone');
    const a1 = urlParams.get('a1');
    const a2 = urlParams.get('a2');

    if (from && to) {
      document.getElementById('generatorPage').classList.add('hidden');
      document.getElementById('proposalPage').classList.remove('hidden');

      document.getElementById('proposalQuestion').textContent = `${to}, do you mew my Valentine? üòª`;

      amount1 = parseInt(a1) || 0;
      amount2 = parseInt(a2) || 0;
      userPhone = phone || '';

      localStorage.setItem('valentineData', JSON.stringify({
        from: from,
        to: to,
        phone: phone,
        amount1: amount1,
        amount2: amount2
      }));

      generatedTime = new Date();

      setTimeout(() => {
        document.getElementById('noHint').classList.remove('hidden');
      }, 2000);
    }
  };
</script>
</body>
</html>


